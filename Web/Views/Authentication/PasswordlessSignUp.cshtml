<header>
    <h1>Sign in</h1>
    @await Component.InvokeAsync("NavBar")
</header>

<main>
    <form id="passwordlessSignUpForm" method="post">
        <input
            type="text"
            name="username"
            placeholder="Username"
            aria-label="Username"
            autoComplete="username"
            required/>
        <button type="submit">
            Sign Up
        </button>
    </form>
</main>

@section Scripts
{
    <script type="module">
      import { Client } from 'https://cdn.passwordless.dev/dist/1.1.0/esm/passwordless.min.mjs';
        
      document.getElementById('passwordlessSignUpForm').addEventListener('submit', async (e) => {
          e.preventDefault();
          const username = e.target.querySelector('input[name="username"]').value
          const response = await fetch('@Url.Action("PasswordlessSignUpWebAuthn", "Authentication")', {
             method: 'post',
             headers: {
               "Content-Type": "application/x-www-form-urlencoded",
             },
             body: `username=${encodeURIComponent(username)}`
          });
          
          const responseBody = await response.json()
          console.log('resposne body is ', responseBody);
      });
    </script>
}
